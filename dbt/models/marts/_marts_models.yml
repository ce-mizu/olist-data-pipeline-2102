version: 2

models:
  - name: dim_customers
    description: Customer dimension table with aggregated metrics
    columns:
      - name: customer_id
        description: Primary key
        tests:
          - not_null
          - unique
      - name: total_orders
        description: Total number of orders by customer
      - name: lifetime_value
        description: Total value of all orders by customer
      - name: avg_order_value
        description: Average order value by customer
      - name: on_time_delivery_rate
        description: Percentage of on-time deliveries

  - name: fct_orders
    description: Order fact table with enriched data
    columns:
      - name: order_id
        description: Primary key
        tests:
          - not_null
          - unique
      - name: customer_id
        description: Foreign key to customers
        tests:
          - not_null
      - name: total_order_value
        description: Total order value
        tests:
          - not_null
      - name: delivery_performance
        description: Delivery performance category
        tests:
          - accepted_values:
              values: ['On Time', 'Slightly Late', 'Very Late', 'Unknown']
